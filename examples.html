<!DOCTYPE HTML>

<html>

	<head>
		<title>EchoNest JavaScript API</title>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
		
			<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.js" type="text/javascript"></script>
			<script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js" type="text/javascript"></script>
			<script src="scripts/echonest.js" type="text/javascript"></script>

			<script type="text/javascript">
					$(document).ready(function() {
						
						var echonest = new EchoNest("KTY7T5L87IZ1OG2TM");
						
						// get a set of "Hybrid" audio and output as HTML5 audio tags to the page
						echonest.artist("Hybrid").audio( function(audioCollection) {
							$("#artistAudio").append( audioCollection.to_html('<p>${artist} - ${length} long<br /><audio src="${url}" controls preload="none"></audio></p>') );
						});
						
						// get the second Radiohead biography by artist id and output it onto the page, also output the site it came from and the license used. Nested items are available through a prefix. E.g. "license_type"
						echonest.artist("ARH6W4X1187B99274F").biographies( function(biographyCollection) {
							$("#artistBiography").append( biographyCollection.at(1).to_html('<p>${text} <br/>by: <strong>${site} - <span class="license">${license_type}</span></strong></p>') );
						});
						
						// get a summary of the booka shade blogs plus a count of the available items on the server, where we started from and how many items in our local collection.
						echonest.artist("Booka Shade").blogs( function(blogCollection) {
							$("#artistBlogs").append( blogCollection.to_html('<p>${summary}<br/><span class="total">Total: </span> | <span class="started_at">Started At: </span> | <span class="size">Size of Collection: </span></p>') );
							$("#artistBlogs .total").append( blogCollection.total() );
							$("#artistBlogs .started_at").append( blogCollection.start() );
							$("#artistBlogs .size").append( blogCollection.size() );
						});
						
						// how well do people know Trentemøller?
						echonest.artist("Trentemøller").familiarity( function(familiarity) {
							$('#artistFamiliarity').append( familiarity.to_html('<p>"${familiarity}"</p>') );
						});
						
						// how hot are The Glitch Mob?
						echonest.artist("The Glitch Mob").hotttnesss( function(hotttnesss) {
							$('#artistHotttnesss').append( hotttnesss.to_html('<p>"${hotttnesss}"</p>') );
						});

						// get a set of "Radiohead" artist images and output as a bunch of images to the page (limited to first five results)
						echonest.artist("Radiohead").images( function(imageCollection) {
							$('#artistImages').append( imageCollection.to_html('<img src="${url}">') );
						}, {results: 5});
						
						// catching up with Depeche Mode (a.k.a what's news)
						echonest.artist("Depeche Mode").news( function(newsCollection) {
							$('#artistNews').append( newsCollection.to_html('<p>${summary}<br/><strong>Posted on:</strong> ${date_posted}</p>') );
						});
						
						// get a profile on The Cure, including artist id and foreign catalog id
						echonest.artist("The Cure").profile( function(profile) {
							$('#artistProfile').append( profile.to_html('<dl><dt>Artist Id</dt><dd>${id}</dd><dt>Foreign Catalog Id</dt><dd>${foreign_ids_catalog}</dd></dl>') );
						});
						
						// get reviews about Radiohead
						echonest.artist("Radiohead").reviews( function(reviewCollection) {
							$('#artistReviews').append( reviewCollection.to_html('<p>${summary}</p>') );
						});
						
						// perform an artist search using a search options hash
						searchOptions = {
							name: 'The',
							fuzzy_match: true,
							bucket: 'id:7digital'
						};
						
						echonest.artist().search( function(searchResultsCollection) {
							$('#artistSearchResults').append( searchResultsCollection.to_html('${name} - <strong>${foreign_ids_0_foreign_id}</strong><br/>') );
						}, searchOptions);
						
					});
					
			</script>
		
	</head>

	<body>
		
		<h1>EchoNest JavaScript API Examples</h1>
		<p>A set of examples for interacting with the EchoNest API</p>
		
		<h2>Artist Endpoint</h2>
		
		<h3>Audio (Hybrid)</h3>
		<div id="artistAudio"></div>		
		
		<h3>Biography (Radiohead)</h3>
		<div id="artistBiography"></div>
		
		<h3>Blogs (Booka Shade)</h3>
		<div id="artistBlogs"></div>
		
		<h3>Familiarity (Trentemøller)</h3>
		<div id="artistFamiliarity"></div>
		
		<h3>Hotttnesss (The Glitch Mob)</h3>
		<div id="artistHotttnesss"></div>
		
		<h3>Images (Radiohead)</h3>
		<div id="artistImages"></div>
		
		<h3>News (Depeche Mode)</h3>
		<div id="artistNews"></div>
		
		<h3>Profile (The Cure)</h3>
		<p><strong>Seems to be a bug with this endpoint, is not returning foreign ids as specified in the API docs?</strong></p>
		<div id="artistProfile"></div>
		
		<h3>Reviews (Radiohead)</h3>
		<div id="artistReviews"></div>
		
		<h3>Search Results</h3>
		<div id="artistSearchResults"></div>
		
	</body>
	
</html>